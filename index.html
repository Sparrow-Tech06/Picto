<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Learn Symbols</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<style>
body{background:#f7f9fb;}

.card-ui{
  border-radius:22px;
  padding:25px;
  min-height:360px;
}

.symbol{font-size:90px;}

.option-btn{
  border-radius:50px;
  font-size:16px;
}

.slide-enter-active{
  animation: slideIn .4s ease;
}
@keyframes slideIn{
  from{transform:translateX(100%);opacity:0}
  to{transform:translateX(0);opacity:1}
}

.menu{
  text-align:center;
  padding-top:80px;
}
.logo{
  font-size:80px;
}
.back-btn{
  position:absolute;
  top:15px;
  left:15px;
}
</style>
</head>

<body>

<div id="app">

<!-- MAIN MENU -->
<main v-if="screen==='menu'" class="menu">
  <div class="logo mb-3">ğŸ®</div>
  <h3>Learn Symbols</h3>
  <p class="text-muted">Fun learning game for kids</p>
  <button class="btn btn-success btn-lg mt-3"
          @click="startGame">
    â–¶ï¸ Play Now
  </button>
</main>

<!-- GAME -->
<main v-if="screen==='game'" class="container py-4">

<button class="btn btn-sm btn-outline-secondary back-btn"
        @click="goMenu">
  â† Menu
</button>

<section class="mb-3">
  <div class="progress">
    <div class="progress-bar bg-success"
         :style="{width:progress+'%'}"></div>
  </div>
</section>

<transition name="slide" mode="out-in">
<article class="card-ui text-center"
         :key="index"
         :style="{background:current.bg}">

  <div class="symbol mb-3">{{current.symbol}}</div>
  <h5 class="mb-4">Guess who I am?</h5>

  <div class="d-grid gap-2 mb-3">
    <button v-for="op in current.options"
            class="btn btn-outline-dark option-btn d-flex justify-content-center align-items-center gap-2"
            @click="check(op)">
      ğŸ‘‰ <span>{{op}}</span>
    </button>
  </div>

  <button class="btn btn-sm btn-secondary"
          @click="next">
    Skip
  </button>

</article>
</transition>

</main>

</div>

<!-- SINGLE POPUP -->
<div class="modal fade" id="msgModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center">
      <div class="modal-body">
        <h4>{{popup.icon}} {{popup.title}}</h4>
        <p class="text-muted" v-if="popup.text">{{popup.text}}</p>
        <button class="btn btn-primary mt-3"
                data-bs-dismiss="modal"
                @click="popupAction">
          OK
        </button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
const {createApp}=Vue;

createApp({
data(){
  return{
    screen:'menu',
    cards:[],
    index:0,
    popup:{}
  }
},
computed:{
  current(){return this.cards[this.index]},
  progress(){return ((this.index+1)/this.cards.length)*100}
},
methods:{
  startGame(){
    this.screen='game';
    this.index=0;
  },
  goMenu(){
    this.screen='menu';
  },
  showPopup(icon,title,text,action){
    this.popup={icon,title,text,action};
    new bootstrap.Modal(msgModal).show();
  },
  popupAction(){
    if(this.popup.action) this.popup.action();
  },
  check(ans){
    if(ans===this.current.answer){
      if(this.index===this.cards.length-1){
        this.showPopup("ğŸ‰","Congratulations",
          "You completed all questions",
          ()=>this.startGame());
      }else{
        this.showPopup("âœ”ï¸","Correct Answer","",this.next);
      }
    }else{
      this.showPopup("ğŸ™‚","Try Again","");
    }
  },
  next(){
    if(this.index<this.cards.length-1) this.index++;
  }
},
mounted(){
  fetch("data.json")
    .then(r=>r.json())
    .then(d=>this.cards=d);
}
}).mount('#app');
</script>

</body>
</html>
