<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Learn Symbols</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>

<style>
body{background:#fafafa;font-family:system-ui;}

.logo{font-size:70px;}
.symbol{font-size:90px;}

.card-ui{
  border-radius:22px;
  padding:25px;
  min-height:360px;
}

.option-btn{
  border-radius:50px;
  font-size:16px;
}

/* slide animation */
.slide-enter-active{animation:slideIn .4s ease;}
@keyframes slideIn{
  from{transform:translateX(60px);opacity:0}
  to{transform:translateX(0);opacity:1}
}

/* skeleton */
.skeleton{
  height:360px;
  border-radius:22px;
  background:linear-gradient(90deg,#eee,#f5f5f5,#eee);
  animation:shimmer 1.2s infinite;
}
@keyframes shimmer{
  0%{background-position:-200px}
  100%{background-position:200px}
}

/* hearts */
.hearts span{font-size:20px}

/* Sound Toggle Button */
.sound-toggle{
  position:fixed;
  bottom:20px;
  right:20px;
  z-index:1000;
  width:50px;
  height:50px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:20px;
  background:white;
  box-shadow:0 4px 12px rgba(0,0,0,.1);
  border:none;
}

/* ===== MODAL UI ===== */
.modal-content{
  border-radius:22px;
  border:none;
}

.modal-body{
  padding:32px 20px;
}

.modal-icon{
  width:90px;
  height:90px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  margin:auto;
  animation:pop .4s ease;
}

@keyframes pop{
  from{transform:scale(.6);opacity:0}
  to{transform:scale(1);opacity:1}
}

/* color themes */
.modal-success .modal-icon{background:#e8f9ee;color:#16a34a}
.modal-success h5{color:#16a34a}

.modal-wrong .modal-icon{background:#fff4e5;color:#f97316}
.modal-wrong h5{color:#f97316}

.modal-error .modal-icon{background:#fdeaea;color:#dc2626}
.modal-error h5{color:#dc2626}

.modal-win .modal-icon{background:#eef4ff;color:#2563eb}
.modal-win h5{color:#2563eb}

.modal-backdrop{
  background:rgba(0,0,0,.35);
}
</style>
</head>

<body>
<div id="app">

<!-- HOME -->
<section v-if="screen==='home'" class="text-center py-5">
  <div class="logo">üß†</div>
  <h3>Learn Symbols</h3>
  <p class="text-muted">Fun learning game for kids</p>
  <button class="btn btn-success btn-lg px-5 mt-3" @click="startGame">
    ‚ñ∂ Play Now
  </button>
</section>

<!-- GAME -->
<main v-if="screen==='game'" class="container py-3">

<header class="d-flex align-items-center mb-3">
  <button class="btn btn-sm btn-outline-secondary" @click="goHome">
    ‚¨Ö Back
  </button>

  <div class="ms-3 hearts">
    <span v-for="n in lives">‚ù§Ô∏è</span>
  </div>

  <div class="ms-auto small">
    {{ index+1 }} / {{ total }}
  </div>
</header>

<section v-if="!loaded">
  <div class="skeleton"></div>
</section>

<section v-else>
<transition name="slide" mode="out-in">
<article class="card-ui text-center"
         :style="{background:current.bg}"
         :key="index">

  <div class="symbol mb-3">{{ current.symbol }}</div>
  <h5 class="mb-4">Guess who I am?</h5>

  <div class="d-grid gap-2 mb-3">
    <button v-for="op in current.options"
            class="btn btn-outline-dark option-btn d-flex justify-content-center gap-2"
            @click="check(op)">
      üîò <span>{{ op }}</span>
    </button>
  </div>

  <button class="btn btn-sm btn-secondary" @click="nextWithSound">
    Skip
  </button>

</article>
</transition>
</section>
</main>

<!-- Sound Toggle Button (only in game screen) -->
<button v-if="screen==='game'" class="sound-toggle" @click="toggleSound">
  <span v-if="soundEnabled">üîä</span>
  <span v-else>üîá</span>
</button>

<!-- SINGLE MODAL -->
<div class="modal fade" id="gameModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" :class="modalClass">
      <div class="modal-body text-center">
        <div class="modal-icon mb-3">{{ modalIcon }}</div>
        <h5>{{ modalText }}</h5>
        <button class="btn btn-primary px-4 mt-3"
                data-bs-dismiss="modal"
                @click="modalAction">
          OK
        </button>
      </div>
    </div>
  </div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
const { createApp } = Vue;

createApp({
  data(){
    return{
      screen:'home',
      cards:[],
      index:0,
      loaded:false,
      lives:3,
      modalIcon:'',
      modalText:'',
      modalClass:'',
      action:'',
      soundEnabled:true,
      sounds:{
        click:null,
        correct:null,
        wrong:null,
        gameOver:null,
        win:null,
        slide:null,
        home:null
      }
    }
  },
  computed:{
    current(){ return this.cards[this.index]; },
    total(){ return this.cards.length; }
  },
  methods:{
    initSounds(){
      // Using free sound effects from online sources (replace with your own if needed)
      this.sounds.click = new Howl({
        src: ['https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3'],
        volume: 0.3
      });
      
      this.sounds.correct = new Howl({
        src: ['https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3'],
        volume: 0.4
      });
      
      this.sounds.wrong = new Howl({
        src: ['https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3'],
        volume: 0.4
      });
      
      this.sounds.gameOver = new Howl({
        src: ['https://assets.mixkit.co/sfx/preview/mixkit-sad-game-over-trombone-471.mp3'],
        volume: 0.5
      });
      
      this.sounds.win = new Howl({
        src: ['https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3'],
        volume: 0.5
      });
      
      this.sounds.slide = new Howl({
        src: ['https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3'],
        volume: 0.3
      });
      
      this.sounds.home = new Howl({
        src: ['https://assets.mixkit.co/sfx/preview/mixkit-plastic-bubble-click-1124.mp3'],
        volume: 0.3
      });
    },
    
    playSound(soundName){
      if(this.soundEnabled && this.sounds[soundName]){
        this.sounds[soundName].play();
      }
    },
    
    toggleSound(){
      this.soundEnabled = !this.soundEnabled;
      this.playSound('click');
    },
    
    startGame(){
      this.playSound('home');
      this.screen='game';
      this.restart();
    },
    
    goHome(){
      this.playSound('home');
      this.screen='home';
    },
    
    showModal(icon,text,cls,action){
      this.modalIcon=icon;
      this.modalText=text;
      this.modalClass=cls;
      this.action=action;
      new bootstrap.Modal(gameModal,{backdrop:'static'}).show();
    },
    
    modalAction(){
      this.playSound('click');
      if(this.action==='next') this.next();
      if(this.action==='restart') this.restart();
    },
    
    check(ans){
      this.playSound('click');
      
      if(ans===this.current.answer){
        this.playSound('correct');
        if(this.index===this.total-1){
          this.showModal('üèÜ','Congratulations! You completed all questions','modal-win','restart');
        }else{
          this.showModal('‚úîÔ∏è','Correct Answer','modal-success','next');
        }
      }else{
        this.playSound('wrong');
        this.lives--;
        if(this.lives<=0){
          this.playSound('gameOver');
          this.showModal('üíî','Game Over! Try Again','modal-error','restart');
        }else{
          this.showModal('üòä','Wrong Answer! Try Again','modal-wrong','');
        }
      }
    },
    
    next(){
      this.playSound('slide');
      if(this.index<this.total-1) this.index++;
    },
    
    nextWithSound(){
      this.playSound('click');
      this.next();
    },
    
    restart(){
      this.playSound('home');
      this.index=0;
      this.lives=3;
    }
  },
  mounted(){
    // Initialize sounds
    this.initSounds();
    
    // Load game data
    fetch('data.json')
      .then(r=>r.json())
      .then(d=>{
        this.cards=d;
        this.loaded=true;
      })
      .catch(err=>{
        console.error('Error loading data:', err);
        // Fallback data if data.json doesn't exist
        this.cards = [
          {
            symbol: "üê∂",
            bg: "#FFF0F0",
            answer: "Dog",
            options: ["Cat", "Dog", "Bird", "Fish"]
          },
          {
            symbol: "üê±",
            bg: "#F0F8FF",
            answer: "Cat",
            options: ["Rabbit", "Dog", "Cat", "Mouse"]
          },
          {
            symbol: "üê∞",
            bg: "#F0FFF0",
            answer: "Rabbit",
            options: ["Rabbit", "Horse", "Cow", "Duck"]
          }
        ];
        this.loaded = true;
      });
  }
}).mount('#app');
</script>
</body>
</html>
