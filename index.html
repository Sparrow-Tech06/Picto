<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Learn Symbols</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        body { background: #fafafa; font-family: 'Segoe UI', sans-serif; }
        .logo { font-size: 70px; }
        .card-ui { border-radius: 22px; padding: 25px; min-height: 380px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .symbol { font-size: 90px; }
        .option-btn { border-radius: 50px; font-size: 16px; transition: 0.2s; }
        .option-btn:hover { transform: scale(1.02); }
        .lives { font-size: 20px; color: #ff4d4d; }
        
        /* Smooth Slide Animation */
        .slide-enter-active { animation: slideIn .4s ease-out; }
        @keyframes slideIn {
            from { transform: translateX(50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .skeleton { height: 380px; border-radius: 22px; background: #eee; background: linear-gradient(90deg,#eee,#f5f5f5,#eee); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    </style>
</head>
<body>

<div id="app">

    <section v-if="screen==='home'" class="text-center py-5">
        <div class="logo mb-3">üß†</div>
        <h3 class="fw-bold">Learn Symbols</h3>
        <p class="text-muted">Fun learning game for kids</p>
        <button class="btn btn-success btn-lg px-5 mt-3 shadow-sm" @click="startGame">‚ñ∂ Play Now</button>
    </section>

    <main v-if="screen==='game'" class="container py-3" style="max-width: 500px;">
        <header class="d-flex align-items-center mb-3">
            <button class="btn btn-sm btn-light border" @click="screen='home'">‚¨Ö Exit</button>
            <div class="ms-auto d-flex align-items-center gap-3">
                <span class="lives">{{ '‚ù§Ô∏è'.repeat(lives) }}{{ 'üñ§'.repeat(3 - lives) }}</span>
                <span class="badge bg-dark">{{ index + 1 }} / {{ total }}</span>
            </div>
        </header>

        <section v-if="!loaded"><article class="skeleton"></article></section>

        <section v-else>
            <transition name="slide" mode="out-in">
                <article class="card-ui text-center" :style="{background: current.bg}" :key="index">
                    <div class="symbol mb-2">{{ current.symbol }}</div>
                    <h5 class="mb-4 fw-bold">Guess who I am?</h5>
                    <div class="d-grid gap-2 mb-3">
                        <button v-for="op in current.options" 
                                class="btn btn-white bg-white border-0 shadow-sm option-btn py-2" 
                                @click="check(op)">
                            {{ op }}
                        </button>
                    </div>
                    <button class="btn btn-link text-decoration-none text-muted mt-2" @click="next">Skip This ‚è≠Ô∏è</button>
                </article>
            </transition>
        </section>
    </main>

    <div class="modal fade" id="gameModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content border-0 shadow-lg" style="border-radius: 20px;">
                <div class="modal-body text-center p-4">
                    <div class="display-1 mb-3">{{ modalIcon }}</div>
                    <h4 class="fw-bold">{{ modalTitle }}</h4>
                    <p class="text-muted">{{ modalText }}</p>
                    <button class="btn btn-primary w-100 rounded-pill py-2" data-bs-dismiss="modal">
                        {{ lives > 0 ? 'Continue' : 'Restart Game' }}
                    </button>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const { createApp } = Vue;

createApp({
    data() {
        return {
            screen: 'home',
            cards: [],
            index: 0,
            lives: 3,
            loaded: false,
            modalIcon: '',
            modalTitle: '',
            modalText: '',
            nextAction: null,
            bsModal: null
        }
    },
    computed: {
        current() { return this.cards[this.index] || {}; },
        total() { return this.cards.length; }
    },
    methods: {
        startGame() {
            this.lives = 3;
            this.index = 0;
            this.screen = 'game';
        },
        showModal(icon, title, text, action) {
            this.modalIcon = icon;
            this.modalTitle = title;
            this.modalText = text;
            this.nextAction = action;
            this.bsModal.show();
        },
        check(ans) {
            if (ans === this.current.answer) {
                if (this.index === this.total - 1) {
                    this.showModal('üèÜ', 'Amazing!', 'You finished the whole quiz!', () => this.screen = 'home');
                } else {
                    this.showModal('‚úÖ', 'Correct!', 'You are doing great!', () => this.index++);
                }
            } else {
                this.lives--;
                if (this.lives <= 0) {
                    this.showModal('üíÄ', 'Game Over', 'Better luck next time!', () => this.startGame());
                } else {
                    this.showModal('‚ùå', 'Wrong', `Oops! You have ${this.lives} lives left.`, null);
                }
            }
        },
        next() {
            if (this.index < this.total - 1) this.index++;
            else this.screen = 'home';
        }
    },
    mounted() {
        this.bsModal = new bootstrap.Modal(document.getElementById('gameModal'));
        
        // Modal close hone ke baad action trigger hoga (is se blink/glitch nahi hota)
        document.getElementById('gameModal').addEventListener('hidden.bs.modal', () => {
            if (this.nextAction) {
                this.nextAction();
                this.nextAction = null;
            }
        });
    }
}).mount('#app');
</script>
</body>
</html>
